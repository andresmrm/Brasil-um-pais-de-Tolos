!html
html
  head
    title
      -block titulo
        |Jogo de Cartas
    meta name="keywords" content="template language"
    link href="static/estilo.less" rel="stylesheet/less" type="text/css" 
    %script src="static/less.js" type="text/javascript"
    %script src="static/jquery.js" type="text/javascript"

    script type="text/javascript"
      -block codigo1
        | 
          var meu_nome \= "Tolo1";
          var meu_cod \= "teste";
          var num_jogada \= 0;
          var cartas \= {};
          $.getJSON("baralho", function(data){
            cartas \= data;
          });

  body
    /.cabeca
    /  header Comeco
    .centro
      -block central
        h1 HAHAHAHA! Alguem devia ter colocado algo aqui!

      script type="text/javascript"
        -block codigo2
          | 
            function carta_clicada() {
              var id \= $(this).attr('id');
              $.post("jogada", {"jogador":meu_nome,"cod":meu_cod,"jogada":id})
              .success(function(data) { alert("sucesso!"+data); })
              .error(function(data) { alert("erro!"+data); });
              atualizar();
            }
            $(".mais_din").click(function() {
              $.post("jogada", {"jogador":meu_nome,"cod":meu_cod,"jogada":"D1"})
              .success(function(data) { alert("sucesso!"+data); })
              .error(function(data) { alert("erro!"+data); });
              atualizar();
            });
            $(".mais_carta").click(function() {
              $.post("jogada", {"jogador":meu_nome,"cod":meu_cod,"jogada":"M1"})
              .success(function(data) { alert("sucesso!"+data); })
              .error(function(data) { alert("erro!"+data); });
              atualizar();
            });
            function atualizar() {
              $.post("atualizar", {"jogador":meu_nome,"cod":meu_cod,"num_jogada":num_jogada}, function(data){
                if(data!\="0"){
                  num_jogada \= data["num_jogada"];
                  $('.menu_mao').html(data["mao"]);
                  $('.mesas').html(data["mesas"]);
                  $(".carta").click(carta_clicada);
                }
              });
            }
            setInterval('atualizar()', 3000);
            $(".carta").click(carta_clicada);

    .rodape
      footer Fim
